(()=>{"use strict";function t(t,e,r,n,a,i,o){try{var c=t[i](o),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,a)}function e(e){return function(){var r=this,n=arguments;return new Promise((function(a,i){var o=e.apply(r,n);function c(e){t(o,a,i,c,u,"next",e)}function u(e){t(o,a,i,c,u,"throw",e)}c(void 0)}))}}function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var n=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),t.exists)return t.instance;this._path=e,t.exists=!0,t.instance=this}var n,a,i,o,c,u,s;return n=t,a=[{key:"getData",value:function(){return{path:this._path}}},{key:"get",value:(s=e(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",fetch(this._path).then((function(t){if(t.ok)return t.json()})).then((function(t){return t})).catch((function(t){throw new Error("Un problème est survenu lors de la récupération des données :",t)})));case 1:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)})},{key:"getPhotographers",value:(u=e(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.get();case 2:return e=t.sent,t.abrupt("return",e.photographers);case 4:case"end":return t.stop()}}),t,this)}))),function(){return u.apply(this,arguments)})},{key:"getPhotographer",value:(c=e(regeneratorRuntime.mark((function t(e){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.get();case 2:return r=t.sent,t.abrupt("return",r.photographers.filter((function(t){return t.id===parseInt(e)})));case 4:case"end":return t.stop()}}),t,this)}))),function(t){return c.apply(this,arguments)})},{key:"getMedias",value:(o=e(regeneratorRuntime.mark((function t(e){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.get();case 2:return r=t.sent,t.abrupt("return",r.media.filter((function(t){return t.photographerId===parseInt(e)})));case 4:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})},{key:"getMedia",value:(i=e(regeneratorRuntime.mark((function t(e){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.get();case 2:return r=t.sent,t.abrupt("return",r.media.filter((function(t){return t.id===parseInt(e)})));case 4:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})}],a&&r(n.prototype,a),Object.defineProperty(n,"prototype",{writable:!1}),t}();function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var i=function(){function t(e){var r=e.id,n=e.name,a=e.city,i=e.country,o=e.tags,c=e.tagline,u=e.price,s=e.portrait;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._id=r,this._name=n,this._city=a,this._country=i,this._tags=o,this._tagline=c,this._price=u,this.portrait=s}var e,r;return e=t,(r=[{key:"id",get:function(){return this._id},set:function(t){this._id=t}},{key:"name",get:function(){return this._name},set:function(t){this._name=t}},{key:"city",get:function(){return this._city},set:function(t){this._city=t}},{key:"country",get:function(){return this._country},set:function(t){this._country=t}},{key:"tags",get:function(){return this._tags},set:function(t){this._tags=t}},{key:"tagline",get:function(){return this._tagline},set:function(t){this._tagline=t}},{key:"price",get:function(){return"".concat(this._price,"€ / jour")},set:function(t){this._price=t}},{key:"portrait",get:function(){return this._portrait},set:function(t){this._portrait=t}},{key:"getComeFrom",value:function(){return"".concat(this.city,", ").concat(this.country)}}])&&a(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var c=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._photographer=e,this._photographerCard=document.createElement("div")}var e,r;return e=t,(r=[{key:"buildPhotographerCardDOM",value:function(){return this.createLinkElement(),this.createComeFromeElement(),this.createTaglineElement(),this.createPriceElement(),this.createTagsElement(),this._photographerCard.className="photographer",this._photographerCard}},{key:"createLinkElement",value:function(){var t=document.createElement("a");t.setAttribute("href","./photographer.html?id=".concat(this._photographer._id)),t.setAttribute("aria-label","Lien vers la page de ".concat(this._photographer.name)),t.className="photographer-link";var e=document.createElement("img");e.setAttribute("src","./public/assets/photographers/Photographers_ID_Photos/littles/".concat(this._photographer.portrait)),e.setAttribute("alt","Photo de "+this._photographer.name),e.classList="photographer-img";var r=document.createElement("h2");r.textContent=this._photographer.name,r.classList="photographer-title card",t.append(e),t.append(r),this._photographerCard.append(t)}},{key:"createComeFromeElement",value:function(){var t=document.createElement("h3");t.textContent=this._photographer.getComeFrom(),t.classList="photographer-origin card",t.setAttribute("lang","en"),this._photographerCard.append(t)}},{key:"createTagsElement",value:function(){var t=document.createElement("div");t.classList.add("tags"),this._photographer.tags.forEach((function(e){var r=document.createElement("span");r.classList.add("tag"),r.innerHTML=e,r.setAttribute("data-value",e),r.setAttribute("lang","en"),t.append(r)})),this._photographerCard.append(t)}},{key:"createTaglineElement",value:function(){var t=document.createElement("p");t.textContent=this._photographer.tagline,t.classList="photographer-tagline card",this._photographerCard.append(t)}},{key:"createPriceElement",value:function(){var t=document.createElement("p");t.textContent=this._photographer.price,t.classList="photographer-price card",this._photographerCard.append(t)}}])&&o(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function u(t,e,r,n,a,i,o){try{var c=t[i](o),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,a)}function s(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var i=t.apply(e,r);function o(t){u(i,n,a,o,c,"next",t)}function c(t){u(i,n,a,o,c,"throw",t)}o(void 0)}))}}function h(t){return p.apply(this,arguments)}function p(){return(p=s(regeneratorRuntime.mark((function t(e){var r,a,o,u,s,p,l,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new n("./data/datas.json"),t.next=3,r.getPhotographers();case 3:a=t.sent,o=document.querySelector(".photographer_section"),u=document.querySelectorAll(".tag"),s=document.querySelector(".tags"),p="",l=document.querySelector(".delete-filter"),u.forEach((function(t){return t.classList.remove("tag--selected")})),this.classList.contains("tag")?(f=this.dataset.value,document.querySelectorAll('.tag[data-value="'.concat(f,'"]')).forEach((function(t){t.classList.add("tag--selected"),s.setAttribute("aria-selected",t.dataset.value)})),p=a.filter((function(t){return t.tags.includes(f)})),l.style.display="block"):(p=a,l.style.display="none"),o.innerHTML="",p.forEach((function(t){var e=new i(t),r=new c(e).buildPhotographerCardDOM();o.append(r),r.querySelectorAll(".tag").forEach((function(t){return t.addEventListener("click",h)}))})),l.addEventListener("click",h);case 14:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function l(t,e,r,n,a,i,o){try{var c=t[i](o),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,a)}function f(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var i=t.apply(e,r);function o(t){l(i,n,a,o,c,"next",t)}function c(t){l(i,n,a,o,c,"throw",t)}o(void 0)}))}}function d(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}(new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._datas=new n("./data/datas.json")}var e,r,a;return e=t,r=[{key:"displayData",value:(a=f(regeneratorRuntime.mark((function t(){var e,r,n,a,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=document.querySelector(".photographer_section"),t.prev=1,t.next=4,this._datas.getPhotographers();case 4:r=t.sent,document.querySelector("header").focus(),n=[],r.forEach((function(t){t.tags.forEach((function(t){n.includes(t)||n.push(t)}))})),(a=document.querySelector(".tags")).setAttribute("tabindex",0),a.setAttribute("role","list"),a.setAttribute("aria-label","Filtrer les photographes par tag"),n.forEach((function(t){var e=document.createElement("span");e.classList.add("tag"),e.innerHTML=t,e.setAttribute("data-value",t),e.setAttribute("role","listitem"),e.setAttribute("lang","en"),e.setAttribute("aria-label","tag"),e.setAttribute("tabindex",-1),a.append(e),e.addEventListener("click",h),e.addEventListener("keydown",(function(t){"Enter"===t.key&&e.click()})),e.addEventListener("keydown",(function(t){"Escape"===t.key&&a.focus()})),e.addEventListener("focus",(function(){a.setAttribute("aria-activedescendant",t)}))})),a.addEventListener("keydown",(function(t){"Enter"===t.key&&(document.querySelector(".tag").focus(),document.querySelectorAll(".tag").forEach((function(t){return t.setAttribute("tabindex",1)})))})),r.forEach(function(){var t=f(regeneratorRuntime.mark((function t(r){var n,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new i(r),a=new c(n).buildPhotographerCardDOM(),e.appendChild(a),a.querySelectorAll(".tag").forEach((function(t){return t.addEventListener("click",h)}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),(o=document.createElement("button")).setAttribute("type","button"),o.setAttribute("class","delete-filter"),o.setAttribute("aria-label","Supprimer les filtres"),o.innerHTML="Annuler les filtres",document.querySelector("body").append(o),t.next=27;break;case 24:t.prev=24,t.t0=t.catch(1),console.log("Un problème est survenu : ",t.t0);case 27:case"end":return t.stop()}}),t,this,[[1,24]])}))),function(){return a.apply(this,arguments)})}],r&&d(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}())).displayData()})();
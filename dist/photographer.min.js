(()=>{"use strict";function t(t,e,n,r,i,a,o){try{var c=t[a](o),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,i)}function e(e){return function(){var n=this,r=arguments;return new Promise((function(i,a){var o=e.apply(n,r);function c(e){t(o,i,a,c,s,"next",e)}function s(e){t(o,i,a,c,s,"throw",e)}c(void 0)}))}}function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var r=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),t.exists)return t.instance;this._path=e,t.exists=!0,t.instance=this}var r,i,a,o,c,s,l;return r=t,i=[{key:"getData",value:function(){return{path:this._path}}},{key:"get",value:(l=e(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",fetch(this._path).then((function(t){if(t.ok)return t.json()})).then((function(t){return t})).catch((function(t){throw new Error("Un problème est survenu lors de la récupération des données :",t)})));case 1:case"end":return t.stop()}}),t,this)}))),function(){return l.apply(this,arguments)})},{key:"getPhotographers",value:(s=e(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.get();case 2:return e=t.sent,t.abrupt("return",e.photographers);case 4:case"end":return t.stop()}}),t,this)}))),function(){return s.apply(this,arguments)})},{key:"getPhotographer",value:(c=e(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.get();case 2:return n=t.sent,t.abrupt("return",n.photographers.filter((function(t){return t.id===parseInt(e)})));case 4:case"end":return t.stop()}}),t,this)}))),function(t){return c.apply(this,arguments)})},{key:"getMedias",value:(o=e(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.get();case 2:return n=t.sent,t.abrupt("return",n.media.filter((function(t){return t.photographerId===parseInt(e)})));case 4:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})},{key:"getMedia",value:(a=e(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.get();case 2:return n=t.sent,t.abrupt("return",n.media.filter((function(t){return t.id===parseInt(e)})));case 4:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})}],i&&n(r.prototype,i),Object.defineProperty(r,"prototype",{writable:!1}),t}();function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a=function(){function t(e){var n=e.id,r=e.name,i=e.city,a=e.country,o=e.tags,c=e.tagline,s=e.price,l=e.portrait;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._id=n,this._name=r,this._city=i,this._country=a,this._tags=o,this._tagline=c,this._price=s,this.portrait=l}var e,n;return e=t,(n=[{key:"id",get:function(){return this._id},set:function(t){this._id=t}},{key:"name",get:function(){return this._name},set:function(t){this._name=t}},{key:"city",get:function(){return this._city},set:function(t){this._city=t}},{key:"country",get:function(){return this._country},set:function(t){this._country=t}},{key:"tags",get:function(){return this._tags},set:function(t){this._tags=t}},{key:"tagline",get:function(){return this._tagline},set:function(t){this._tagline=t}},{key:"price",get:function(){return"".concat(this._price,"€ / jour")},set:function(t){this._price=t}},{key:"portrait",get:function(){return this._portrait},set:function(t){this._portrait=t}},{key:"getComeFrom",value:function(){return"".concat(this.city,", ").concat(this.country)}}])&&i(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function o(t,e){var n=0;return e.forEach((function(t){n+=t.likes})),t.totalLikes=n,t}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._photographer=e,this._photographerBanner=document.getElementsByClassName("photograph-header")[0]}var e,n;return e=t,(n=[{key:"buildPhotographerPageDOM",value:function(){return this.createTitleBlockElement(),this.updateContactMe(),this.createPortraitElement(),this.createFixBottomElement(),this._photographerBanner}},{key:"createTitleBlockElement",value:function(){var t=document.querySelector("header");t.setAttribute("aria-label","Page du photographe ".concat(this._photographer.name)),t.focus();var e=document.createElement("div");e.classList="photographer-title-block";var n=document.createElement("h1");n.textContent=this._photographer.name,n.classList="photographer-title";var r=document.createElement("h2");r.textContent=this._photographer.city,r.classList="photographer-origin",r.setAttribute("lang","en");var i=document.createElement("p");i.textContent=this._photographer.tagline,i.classList="photographer-tagline";var a=document.createElement("div");a.classList.add("tags-static"),this._photographer.tags.forEach((function(t){var e=document.createElement("span");e.classList.add("tag-static"),e.innerHTML=t,e.setAttribute("data-value",t),e.setAttribute("lang","en"),a.append(e)})),e.append(n),e.append(r),e.append(i),e.append(a),this._photographerBanner.prepend(e)}},{key:"updateContactMe",value:function(){document.querySelector(".contact_button").setAttribute("data-photographerId",this._photographer.id)}},{key:"createPortraitElement",value:function(){var t=document.createElement("img");t.setAttribute("src","./public/assets/photographers/Photographers_ID_Photos/littles/".concat(this._photographer.portrait)),t.setAttribute("alt",this._photographer.name),t.classList="photographer-img",this._photographerBanner.append(t)}},{key:"createFixBottomElement",value:function(){var t=document.createElement("div");t.classList="fix";var e=document.createElement("div");e.textContent=this._photographer.totalLikes,e.classList="fix__total-likes",e.setAttribute("data-total",this._photographer.totalLikes),e.setAttribute("lang","en");var n=document.createElement("div");n.textContent=this._photographer.price,n.classList="fix__price",t.append(e),t.append(n),document.querySelector("body").append(t)}}])&&c(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var u=function(){function t(e){var n=e.id,r=e.photographerId,i=e.title,a=e.image,o=e.likes,c=e.date,s=e.price,l=e.altText;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._id=n,this._photographerId=r,this._title=i,this._image=a,this._likes=o,this._date=c,this._price=s,this._altText=l}var e,n;return e=t,(n=[{key:"id",get:function(){return this._id},set:function(t){this._id=t}},{key:"photographerId",get:function(){return this._photographerId},set:function(t){this._photographerId=t}},{key:"title",get:function(){return this._title},set:function(t){this._title=t}},{key:"image",get:function(){return this._image},set:function(t){this._image=t}},{key:"likes",get:function(){return this._likes},set:function(t){this._likes=t}},{key:"date",get:function(){return this._date},set:function(t){this._date=t}},{key:"price",get:function(){return this._price},set:function(t){this._price=t}},{key:"altText",get:function(){return this._altText},set:function(t){this._altText=t}}])&&l(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var p=function(){function t(e){var n=e.id,r=e.photographerId,i=e.video,a=e.title,o=e.likes,c=e.date,s=e.price,l=e.altText;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._id=n,this._photographerId=r,this._title=a,this._video=i,this._likes=o,this._date=c,this._price=s,this._altText=l}var e,n;return e=t,(n=[{key:"id",get:function(){return this._id},set:function(t){this._id=t}},{key:"photographerId",get:function(){return this._photographerId},set:function(t){this._photographerId=t}},{key:"title",get:function(){return this._title},set:function(t){this._title=t}},{key:"video",get:function(){return this._video},set:function(t){this._video=t}},{key:"likes",get:function(){return this._likes},set:function(t){this._likes=t}},{key:"date",get:function(){return this._date},set:function(t){this._date=t}},{key:"price",get:function(){return this._price},set:function(t){this._price=t}},{key:"altText",get:function(){return this._altText},set:function(t){this._altText=t}}])&&d(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e,n){return e&&h(t.prototype,e),n&&h(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var m=f((function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e.video)return new p(e);if(e.image)return new u(e);throw new Error("Le type de cet élément n'est pas reconnu !")}));function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var b=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._media=e,this._photographer=n,this._mediaSection=document.querySelector(".media-section"),this._mediaCard=document.createElement("div"),this._mediaCard.classList="media-card",this._mediaCard.setAttribute("data-date",this._media.date),this._mediaCard.setAttribute("tabindex",0),this._mediaCard.setAttribute("aria-labelledby","card-title-".concat(this._media.id))}var e,n;return e=t,(n=[{key:"buildMediaCardDOM",value:function(){this.createMediaPicture(),this.createMediaDetails(),this._mediaSection.append(this._mediaCard)}},{key:"createMediaDetails",value:function(){var t=document.createElement("div");t.classList="media-details";var e=document.createElement("h3");e.textContent=this._media.title,e.setAttribute("id","card-title-".concat(this._media.id)),e.classList="media-details__title",e.setAttribute("lang","en");var n=document.createElement("div");n.textContent=this._media.likes,n.classList="media-details__likes",n.setAttribute("role","button"),n.setAttribute("aria-label","Cliquer pour ajouter un like"),n.setAttribute("data-likes",this._media.likes),n.setAttribute("tabindex",0),n.setAttribute("lang","en"),t.append(e),t.append(n),this._mediaCard.append(t)}}])&&y(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function g(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function w(t,e){return w=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},w(t,e)}function k(t,e){if(e&&("object"===v(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function x(t){return x=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},x(t)}var E=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&w(t,e)}(o,t);var e,n,r,i,a=(r=o,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=x(r);if(i){var n=x(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return k(this,t)});function o(){return g(this,o),a.apply(this,arguments)}return e=o,(n=[{key:"createMediaPicture",value:function(){var t=document.createElement("img");t.setAttribute("src","./public/assets/photographers/".concat(this._photographer.name.replace(" ","_"),"/mediums/").concat(this._media.image)),t.setAttribute("alt",this._media.altText),t.setAttribute("data-id",this._media.id),t.setAttribute("tabindex",0),t.setAttribute("role","button"),t.setAttribute("aria-label","Ouvrir le media en grand dans une lightbox"),t.classList="media-thumbnail",this._mediaCard.append(t)}}])&&_(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(b);function S(t){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S(t)}function L(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function P(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function A(t,e){return A=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},A(t,e)}function T(t,e){if(e&&("object"===S(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function q(t){return q=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},q(t)}var O=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&A(t,e)}(o,t);var e,n,r,i,a=(r=o,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=q(r);if(i){var n=q(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return T(this,t)});function o(){return L(this,o),a.apply(this,arguments)}return e=o,(n=[{key:"createMediaPicture",value:function(){var t=document.createElement("video");t.classList="media-thumbnail",t.setAttribute("controls","controls"),t.setAttribute("data-id",this._media.id),t.setAttribute("tabindex",0),t.setAttribute("aria-label","Ouvrir le media en grand dans une lightbox"),t.setAttribute("aria-desribedby","transcript-".concat(this._media.altText));var e=document.createElement("track");e.setAttribute("kind","descriptions"),e.setAttribute("src","./public/assets/photographers/".concat(this._photographer.name.replace(" ","_"),"/videos/video.vtt")),e.setAttribute("srclang","fr");var n=document.createElement("source");n.setAttribute("src","./public/assets/photographers/".concat(this._photographer.name.replace(" ","_"),"/videos/").concat(this._media.video)),n.setAttribute("type","video/mp4");var r=document.createElement("div");r.setAttribute("id","transcript-".concat(this._media.altText)),r.classList.add("transcript"),t.append(n),t.append(e),this._mediaCard.append(t)}}])&&P(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(b);function j(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function C(t,e,n){return e&&j(t.prototype,e),n&&j(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var M=C((function t(e,n){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e.video)return new O(e,n);if(e.image)return new E(e,n);throw new Error("Le type de cet élément n'est pas reconnu !")}));function I(){var t=this.dataset.likes;t++,this.innerText=t,this.setAttribute("data-likes",t);var e=document.getElementsByClassName("fix__total-likes")[0],n=e.dataset.total;n++,e.innerText=n,e.setAttribute("data-total",n)}function R(t,e,n,r,i,a,o){try{var c=t[a](o),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,i)}function D(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var B=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._data=new r("./data/datas.json"),this._mediaId=e}var e,n,i,a;return e=t,n=[{key:"build",value:(i=regeneratorRuntime.mark((function t(){var e,n,r,i=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._data.get();case 2:if(e=t.sent,this._media=e.media.filter((function(t){return t.id===parseInt(i._mediaId)}))[0],this._photographer=e.photographers.filter((function(t){return t.id===parseInt(i._media.photographerId)}))[0],this._medias=e.media.filter((function(t){return t.photographerId===parseInt(i._photographer.id)})),(n=this._medias.indexOf(this._media)+1)>this._medias.length-1&&(n=0),this._nextMediaId=this._medias[n].id,(r=this._medias.indexOf(this._media)-1)<0&&(r=this._medias.length-1),this._prevMediaId=this._medias[r].id,document.querySelector("#lightbox").setAttribute("data-id",this._media.id),this._modal=document.querySelector(".lightbox-modal"),this._modal.setAttribute("aria-labelledby","media-title-".concat(this._media.id)),this.createModal(),!this._media.image){t.next=20;break}this.createImage(),t.next=25;break;case 20:if(!this._media.video){t.next=24;break}this.createVideo(),t.next=25;break;case 24:throw new Error("Type de média inconnu !");case 25:case"end":return t.stop()}}),t,this)})),a=function(){var t=this,e=arguments;return new Promise((function(n,r){var a=i.apply(t,e);function o(t){R(a,n,r,o,c,"next",t)}function c(t){R(a,n,r,o,c,"throw",t)}o(void 0)}))},function(){return a.apply(this,arguments)})},{key:"createModal",value:function(){this._modal.innerHTML='\n        <div class="close-modal close-modal--lightbox" role="button" data-name="lightbox" data-id='.concat(this._media.id,' tabindex="4" aria-label="Fermer la lightbox">\n          <svg width="42" height="42" viewBox="0 0 42 42" fill="none" xmlns="http://www.w3.org/2000/svg">\n              <path d="M42 4.23L37.77 0L21 16.77L4.23 0L0 4.23L16.77 21L0 37.77L4.23 42L21 25.23L37.77 42L42 37.77L25.23 21L42 4.23Z"/>\n          </svg>\n        </div>\n        <div class="arrow arrow--left" data-id="').concat(this._prevMediaId,'" role="button" tabindex="3" aria-label="image précédente">\n            <i class="fas fa-chevron-left arrow-icon"></i>          \n        </div>\n        <div class="lightbox-content">\n            <div class="lightbox-media" tabindex="1"></div>\n            <div class="lightbox-name" lang="en" id="media-title-').concat(this._media.id,'">').concat(this._media.title,'</div>\n        </div>\n        <div class="arrow arrow--right"  data-id="').concat(this._nextMediaId,'" role="button" tabindex="2"  aria-label="image suivante">\n            <i class="fas fa-chevron-right arrow-icon"></i>          \n        </div>\n    ')}},{key:"createImage",value:function(){this._modal.querySelector(".lightbox-media").innerHTML='\n        <img src="./public/assets/photographers/'.concat(this._photographer.name.replace(" ","_"),"/mediums/").concat(this._media.image,'" alt="').concat(this._media.altText,'" />\n    ')}},{key:"createVideo",value:function(){this._modal.querySelector(".lightbox-media").innerHTML='\n        <video controls tabindex="2" aria-labelledby="media-title-'.concat(this._media.id,'" aria-describedby="transcript-').concat(this._media.id,'">\n            <source src="./public/assets/photographers/').concat(this._photographer.name.replace(" ","_"),"/videos/").concat(this._media.video,'" type="video/mp4">\n            <track kind="descriptions" src="./public/assets/photographers/').concat(this._photographer.name.replace(" ","_"),'/videos/video.vtt" srclang="fr"></track>\n        </video>\n        <div id="transcript-').concat(this._media.id,'" class="transcript">').concat(this._media.altText,"</div>\n    ")}}],n&&D(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function H(t,e,n,r,i,a,o){try{var c=t[a](o),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,i)}function F(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var z=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._data=new r("./data/datas.json"),this._contactBtn=document.querySelector(".contact_button"),this._modal=document.querySelector(".contact-modal"),this._modal.setAttribute("aria-labelledby","contact-title")}var e,n,i,a;return e=t,n=[{key:"build",value:(i=regeneratorRuntime.mark((function t(){var e,n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._data.get();case 2:e=t.sent,this._photographer=e.photographers.filter((function(t){return t.id===parseInt(n._contactBtn.dataset.photographerid)}))[0],this.createModal();case 5:case"end":return t.stop()}}),t,this)})),a=function(){var t=this,e=arguments;return new Promise((function(n,r){var a=i.apply(t,e);function o(t){H(a,n,r,o,c,"next",t)}function c(t){H(a,n,r,o,c,"throw",t)}o(void 0)}))},function(){return a.apply(this,arguments)})},{key:"createModal",value:function(){this._modal.innerHTML='\n        <h1 class="photographer-title photographer-title--modal" id="contact-title">\n            Contactez-moi<br> \n            '.concat(this._photographer.name,'\n            <span role="button" aria-label="Fermer la modale de contact" class="close-modal close-modal--contact" data-name="contact" tabindex="1">\n              <svg width="42" height="42" viewBox="0 0 42 42" fill="none" xmlns="http://www.w3.org/2000/svg">\n                    <path d="M42 4.23L37.77 0L21 16.77L4.23 0L0 4.23L16.77 21L0 37.77L4.23 42L21 25.23L37.77 42L42 37.77L25.23 21L42 4.23Z"/>\n              </svg>\n          </span>\n        </h1>\n        <form action="#" method="post">\n          <div class="formData" id="firstname-input">\n            <label for="firstname">Prénom</label>\n            <input type="text" id="firstname" name="firstname" class="field" aria-labelledby="firstname-input" tabindex="2">\n          </div>\n          <div class="formData" id="lastname-input">\n            <label for="lastname">Nom</label>\n            <input type="text" id="lastname" name="lastname" class="field" aria-labelledby="lastname-input" tabindex="3">\n          </div>\n          <div class="formData" id="email-input">\n            <label for="email">Email</label>\n            <input type="email" id="email" name="email" class="field" aria-labelledby="email-input" tabindex="4">\n          </div>\n          <div class="formData" id="content-area">\n            <label for="content">Votre message</label>\n            <textarea id="content" name="content" rows="6" class="field" aria-labelledby="content-area" tabindex="5"></textarea>\n          </div>\n            <button type="submit" class="button" id="submit-btn" aria-label="Envoyer le message" data-name="contact" tabindex="6">Envoyer</button>\n        </form>\n    ')}}],n&&F(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function N(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var U=function(){function t(e,n,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._firstname=e,this._lastname=n,this._email=r,this._content=i}var e,n;return e=t,(n=[{key:"firstname",get:function(){return this._firstname},set:function(t){if(t.length<3)throw new Error("Saisir au moins 3 caractères");this._firstname=t}},{key:"lastname",get:function(){return this._lastname},set:function(t){if(t.length<3)throw new Error("Saisir au moins 3 caractères");this._lastname=t}},{key:"email",get:function(){return this._email},set:function(t){if(!/^([a-zA-Z0-9-.]{2,})@([a-zA-Z]+)\.[a-z]{2,4}/.test(t))throw new Error("Cette adresse n'est pas valide.");this._email=t}},{key:"content",get:function(){return this._content},set:function(t){if(""===t)throw new Error("Le message est vide !");if(t.length>600)throw new Error("Le message doit contenir moins de 00 caractères !");this._content=t}},{key:"send",value:function(){console.log("Le message a bien été envoyé :"),console.log("Message de : ".concat(this._firstname," ").concat(this._lastname)),console.log("Email: ".concat(this._email)),console.log("Contenu du message: ".concat(this._content))}}])&&N(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Z(t,e,n,r,i,a,o){try{var c=t[a](o),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,i)}function V(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){Z(a,r,i,o,c,"next",t)}function c(t){Z(a,r,i,o,c,"throw",t)}o(void 0)}))}}function K(t){return Y.apply(this,arguments)}function Y(){return(Y=V(regeneratorRuntime.mark((function t(e){var n,r,i,a,o,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(document.querySelector("body").style.overflow="hidden",!this.dataset.id){t.next=16;break}return n=document.getElementById("lightbox"),r=new B(this.dataset.id),t.next=7,r.build();case 7:n.style.display="block",document.querySelector(".lightbox-media").focus(),document.querySelectorAll(".arrow").forEach((function(t){t.addEventListener("click",K),t.addEventListener("keypress",(function(e){13===e.keyCode&&(e.preventDefault(),t.click())}))})),(i=document.querySelector(".close-modal--lightbox")).addEventListener("click",G),i.addEventListener("keypress",(function(t){13===t.keyCode&&(t.stopPropagation(),i.click())})),t.next=27;break;case 16:return a=document.getElementById("contact"),o=new z,t.next=20,o.build();case 20:a.style.display="block",document.querySelector(".close-modal--contact").focus(),document.querySelector("#submit-btn").addEventListener("click",J,!1),(c=document.querySelector(".close-modal--contact")).addEventListener("click",G),c.addEventListener("keypress",(function(t){13===t.keyCode&&c.click()}));case 27:case"end":return t.stop()}}),t,this)})))).apply(this,arguments)}function G(t){if(document.querySelector("body").style.overflow="visible","lightbox"===this.dataset.name){var e=document.querySelector("#lightbox");e.style.display="none",document.querySelector('.media-thumbnail[data-id="'.concat(this.dataset.id,'"]')).focus(),e.querySelectorAll("*[tabindex]").forEach((function(t){return t.setAttribute("tabindex",0)})),console.log(e.querySelectorAll("*[tabindex]"))}if("contact"===this.dataset.name){var n=document.querySelector("#contact");n.style.display="none",document.querySelector(".contact_button").focus(),n.querySelectorAll("*[tabindex]").forEach((function(t){return t.setAttribute("tabindex",0)})),console.log(n.querySelectorAll("*[tabindex]"))}}function J(t){t.preventDefault();for(var e=document.querySelectorAll(".formData"),n=new U,r=0,i=0;i<e.length;i++)try{e[i].removeAttribute("data-error");var a=e[i].querySelector(".field");n[a.name]=a.value}catch(t){r++,e[i].setAttribute("data-error",t)}if(0===r){var o=new Event("sendAndClose");this.addEventListener("sendAndClose",G),n.send(),this.dispatchEvent(o)}else document.querySelector(".formData[data-error] input").focus()}function Q(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var W=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._sortType=e,this._selectBtn=document.querySelector("#sort-by")}var e,n;return e=t,(n=[{key:"popularitySort",value:function(){this._selectBtn.innerHTML='\n      <div id="listbox-options">\n        <div role="option" id="popularity" class="option selected" data-value="popularity" tabindex="0" aria-label="Trier par popularité">Popularité</div>\n        <div role="option" id="date" class="option" data-value="date" tabindex="0" aria-label="Trier par date">Date</div>\n        <div role="option" id="title" class="option" data-value="title" tabindex="0" aria-label="Trier par titre">Titre</div>\n      </div>\n    '}},{key:"dateSort",value:function(){this._selectBtn.innerHTML='\n      <div id="listbox-options">\n        <div role="option" id="date" class="option selected" data-value="date" tabindex="0" aria-label="Trier par date">Date</div>\n        <div role="option" id="popularity" class="option" data-value="popularity" tabindex="0" aria-label="Trier par popularité">Popularité</div>\n        <div role="option" id="title" class="option" data-value="title" tabindex="0" aria-label="Trier par titre">Titre</div>\n      </div>\n    '}},{key:"titleSort",value:function(){this._selectBtn.innerHTML='\n      <div id="listbox-options">\n        <div role="option" id="title" class="option selected" data-value="title" tabindex="0" aria-label="Trier par titre">Titre</div>\n        <div role="option" id="popularity" class="option" data-value="popularity" tabindex="0" aria-label="Trier par popularité">Popularité</div>\n        <div role="option" id="date" class="option" data-value="date" tabindex="0" aria-label="Trier par date">Date</div>\n      </div>\n    '}}])&&Q(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function X(t){this.setAttribute("aria-expanded",!0);var e=document.querySelector("#listbox-options"),n=document.querySelectorAll(".option");e.setAttribute("aria-activedescendant",n[0].dataset.value),n[0].focus();var r=1;n.forEach((function(t){t.setAttribute("tabindex","".concat(r++)),t.classList.remove("selected"),t.classList.add("visible"),t.style.pointerEvents="auto",t.addEventListener("focus",(function(){return e.setAttribute("aria-activedescendant",t.dataset.value)})),t.addEventListener("click",$),t.addEventListener("keypress",(function(e){"Enter"===e.key&&(console.log(e),e.stopPropagation(),t.click())}))}))}function $(t){console.log(this),t.stopPropagation();var e,n=this.dataset.value,r=new W,i=document.querySelectorAll(".media-card");"popularity"===n&&(e=Array.from(i).sort((function(t,e){return e.querySelector(".media-details__likes").dataset.likes-t.querySelector(".media-details__likes").dataset.likes})),r.popularitySort(),document.querySelector('.option[data-value="popularity"]').ariaSelected=!0),"date"===n&&(e=Array.from(i).sort((function(t,e){return new Date(e.dataset.date)-new Date(t.dataset.date)})),r.dateSort(),document.querySelector('.option[data-value="date"]').ariaSelected=!0),"title"===n&&(e=Array.from(i).sort((function(t,e){return t.querySelector(".media-details__title").innerHTML<e.querySelector(".media-details__title").innerHTML?-1:1})),r.titleSort(),document.querySelector('.option[data-value="title"]').ariaSelected=!0);var a=document.querySelector(".media-section");e.forEach((function(t){return a.append(t)}));var o=document.querySelector(".sort-media__listbox");o.setAttribute("aria-expanded",!1),o.focus()}function tt(t,e,n,r,i,a,o){try{var c=t[a](o),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,i)}function et(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._datas=new r("./data/datas.json");var e=new URL(window.location.href);this._photographerId=new URLSearchParams(e.search).get("id")}var e,n,i,c;return e=t,n=[{key:"displayData",value:(i=regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.delegateYield(regeneratorRuntime.mark((function t(){var n,r,i,c,l,u,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._datas.getPhotographer(e._photographerId);case 2:return n=t.sent,t.next=5,e._datas.getMedias(e._photographerId);case 5:for(r=t.sent,i=o(new a(n[0]),r),new s(i).buildPhotographerPageDOM(),r.forEach((function(t){var e=new m(t);new M(e,i).buildMediaCardDOM(),document.querySelector(".contact_button").addEventListener("click",K);var n=document.querySelector('.media-thumbnail[data-id="'.concat(e.id,'"]'));n.addEventListener("click",K),n.addEventListener("keypress",(function(t){13===t.keyCode&&n.click()}))})),c=document.querySelector("#sort-by"),(new W).popularitySort(),c.addEventListener("click",X),c.addEventListener("keypress",(function(t){"Enter"===t.key&&(console.log(t),c.click())})),l=document.getElementsByClassName("media-details__likes"),u=function(t){l[t].addEventListener("click",I),l[t].addEventListener("keypress",(function(e){console.log(e),"Enter"!==e.key&&"+"!==e.key||l[t].click()}))},d=0;d<l.length;d++)u(d);window.addEventListener("keydown",(function(t){var e=document.querySelector("#contact"),n=document.querySelector("#lightbox");"block"===n.style.display&&("Tab"===t.key&&t.target===document.querySelector(".close-modal--lightbox")&&(t.preventDefault(),document.querySelector(".lightbox-media").focus()),"Tab"===t.key&&!0===t.shiftKey&&t.target===document.querySelector(".lightbox-media")&&(t.preventDefault(),document.querySelector(".close-modal--lightbox").focus()),"ArrowRight"===t.key&&(console.log(t),document.querySelector(".arrow--right").click()),"ArrowLeft"===t.key&&document.querySelector(".arrow--left").click(),"Space"===t.code&&n.querySelector("video")&&n.querySelector("video").play(),"Escape"===t.key&&document.querySelector(".close-modal--lightbox").click()),"block"===e.style.display&&(console.log(t),"Tab"===t.key&&t.target===document.querySelector("#submit-btn")&&(t.preventDefault(),document.querySelector(".close-modal--contact").focus()),"Tab"===t.key&&!0===t.shiftKey&&t.target===document.querySelector(".close-modal--contact")&&(t.preventDefault(),document.querySelector("#submit-btn").focus()),"Escape"===t.key&&document.querySelector(".close-modal--contact").click())}));case 19:case"end":return t.stop()}}),t)}))(),"t0",2);case 2:t.next=7;break;case 4:t.prev=4,t.t1=t.catch(0),console.log("Un problème est survenu : ",t.t1);case 7:case"end":return t.stop()}}),t,null,[[0,4]])})),c=function(){var t=this,e=arguments;return new Promise((function(n,r){var a=i.apply(t,e);function o(t){tt(a,n,r,o,c,"next",t)}function c(t){tt(a,n,r,o,c,"throw",t)}o(void 0)}))},function(){return c.apply(this,arguments)})}],n&&et(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}())).displayData()})();